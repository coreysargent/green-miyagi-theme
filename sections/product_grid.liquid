<div class="product-grid-section section-padding reveal" style="background: var(--color-bg);">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="text-center" style="font-size: 3rem; margin-bottom: 5rem;">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="product-grid" style="
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: 3rem;
    ">
      {% for product in collection.products limit: section.settings.products_per_page %}
        <div class="product-card-v2 glass-card">
          <a href="{{ product.url }}">
            <div class="product-image-container relative overflow-hidden" style="border-radius: var(--radius-md); background: rgba(0,0,0,0.2);">
              {% if product.featured_image %}
                <img 
                  src="{{ product.featured_image | image_url: width: 800 }}" 
                  alt="{{ product.featured_image.alt | escape }}"
                  loading="lazy"
                  style="width: 100%; height: auto; transition: var(--transition-smooth); display: block;"
                  class="product-img">
              {% else %}
                 <div style="aspect-ratio: 1/1; background: var(--color-surface); display: flex; items-center justify-center;">
                    <span style="opacity: 0.1; font-weight: 900; font-size: 4rem;">miyagi</span>
                 </div>
              {% endif %}
            </div>
            
            <div class="product-info-premium" style="margin-top: 2rem;">
              <h3 style="font-size: 1.25rem; font-weight: 600; margin-bottom: 0.5rem; text-transform: lowercase;">{{ product.title }}</h3>
              <p style="font-size: 1.1rem; color: var(--color-accent); font-weight: 500;">{{ product.price | money }}</p>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>

    {% if collection.products.size > section.settings.products_per_page %}
      <div class="flex justify-center" style="margin-top: 6rem;">
        <a href="{{ collection.url }}" class="btn-premium outline">view all drops</a>
      </div>
    {% endif %}
  </div>
</div>

<style>
  .product-card-v2 {
    transition: var(--transition-smooth);
    padding: 1.5rem;
  }
  
  .product-card-v2:hover {
    transform: translateY(-10px);
    border-color: var(--color-accent);
  }
  
  .product-card-v2:hover .product-img {
    transform: scale(1.05);
  }
</style>

{% schema %}
{
  "name": "Product Grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "latest drops"
    },
    {
      "type": "range",
      "id": "products_per_page",
      "min": 4,
      "max": 24,
      "step": 4,
      "default": 12,
      "label": "Products per page"
    }
  ],
  "presets": [
    {
      "name": "Product Grid"
    }
  ]
}
{% endschema %}

